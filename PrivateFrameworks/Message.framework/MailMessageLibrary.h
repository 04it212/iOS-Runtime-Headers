/* Generated by RuntimeBrowser on iPhone OS 4.1
   Image: /System/Library/PrivateFrameworks/Message.framework/Message
 */

@class MFWeakSet, NSTimer, <MFMailboxPathProvider>, <MFLibraryMigrationHandler>, NSMutableSet, NSString, NSDate, NSSet;



@interface MailMessageLibrary : MessageLibrary 
{
    NSDate *_lastUpdateDate;
    NSTimer *_commitTimer;
    double _beginTransactionTime;
    struct sqlite3 { } *_writerDB;
    struct __CFDictionary { } *_mailboxCache;
    NSMutableSet *_cachedDatabases;
    struct __CFDictionary { } *_statementCachesByDB;
    double _dateDatabaseBecameLocked;
    struct _opaque_pthread_mutex_t { 
        long __sig; 
        BOOL __opaque[40]; 
    } _dbLock;
    struct _opaque_pthread_mutex_t { 
        long __sig; 
        BOOL __opaque[40]; 
    } _seqNumbersLock;
    struct _opaque_pthread_mutex_t { 
        long __sig; 
        BOOL __opaque[40]; 
    } _priorityLock;
    BOOL _outstandingWritesExist;
    BOOL _writerDBIsBeingUsedAsReader;
    void *_ICUSearchContext;
    void *_CPSearchContext;
    <MFMailboxPathProvider> *_mailboxPathProvider;
    int (*resetHandler)();
    int (*_busyHandler)();
    void *_busyHandlerContext;
    MFWeakSet *_accounts;
    NSString *_activeAccountClause;
    <MFLibraryMigrationHandler> *_migrationHandler;
    unsigned int _attached : 1;
    NSSet *_messagesToUpdateThreadingInfo;
}

+ (unsigned long)priorityKey;
+ (id)defaultInstance;
+ (void)initialize;

- (void)registerForMobileKeyBagNotifications;
- (void)deleteDatabaseAtPath:(id)arg1;
- (void)renameDatabaseAtPath:(id)arg1;
- (void)renameOrRemoveDatabase;
- (void)queueCommitOnMainThread;
- (void)scheduleCommitOnMainThread;
- (void)queueCommitForCurrentThread;
- (void)rescheduleCommit;
- (void)maybeCommitTransaction;
- (void)synchronouslyCommitTransaction;
- (BOOL)initializeDatabase:(struct sqlite3 { }*)arg1;
- (void)_invalidateActiveAccountsClause;
- (BOOL)_writeEmlxFile:(id)arg1 withBodyData:(id)arg2 protectionClass:(NSInteger)arg3;
- (void)notifyConversation:(id)arg1 hasMergedIntoConversation:(id)arg2;
- (void)notifyMessage:(NSUInteger)arg1 hasConversationID:(id)arg2;
- (id)referencesFromHeaders:(id)arg1;
- (id)addThreadingInfoBySubjectForMessageID:(NSUInteger)arg1 nonPrefixedSubject:(id)arg2 messageIDsBySubject:(id)arg3 usingDatabase:(struct sqlite3 { }*)arg4 toReferences:(id)arg5 withinMailbox:(NSInteger)arg6;
- (id)addReferenceInformationForMessageID:(NSUInteger)arg1 encodedMessageID:(id)arg2 withSubject:(id)arg3 withReferences:(id)arg4 usingDatabase:(struct sqlite3 { }*)arg5 otherSubjectIDMappings:(id)arg6 usingMailbox:(NSInteger)arg7 notify:(BOOL)arg8;
- (void)_rebuildActiveAccountsClause;
- (void)setBusyHandler:(int (*)())arg1 context:(void*)arg2;
- (void)iterateStatement:(struct sqlite3_stmt { }*)arg1 db:(struct sqlite3 { }*)arg2 withProgressMonitor:(id)arg3 andRowHandler:(int (*)())arg4 context:(void*)arg5;
- (void)sendMessagesForStatement:(struct sqlite3_stmt { }*)arg1 db:(struct sqlite3 { }*)arg2 to:(id)arg3 options:(NSUInteger)arg4 timestamp:(unsigned long long)arg5;
- (void)sendMessagesMatchingQuery:(const char *)arg1 to:(id)arg2 options:(NSUInteger)arg3;
- (id)messagesMatchingQuery:(const char *)arg1 options:(NSUInteger)arg2;
- (NSUInteger)integerForQuery:(id)arg1 withTextArgument:(id)arg2;
- (NSInteger)mailboxLocationOfMessageID:(NSUInteger)arg1 usingDatabase:(struct sqlite3 { }*)arg2;
- (id)conversationIDsOfMessagesInSameThreadAsMessageID:(NSUInteger)arg1 onlyWithinMailbox:(BOOL)arg2;
- (id)copyMessageInfosOfMessagesInSameThreadAsMessage:(id)arg1 onlyWithinMailbox:(BOOL)arg2;
- (struct __CFDictionary { }*)_copyReferenceHashesWithoutMessagesForMessageWithConversation:(id)arg1;
- (id)_getReferencesForHashesWithOwners:(struct __CFDictionary { }*)arg1;
- (NSInteger)countOfMessagesMissingFromThreadContainingMessage:(id)arg1;
- (NSInteger)loadMoreMessagesForThreadContainingMessage:(id)arg1 hasNoMoreMessages:(BOOL*)arg2;
- (id)stringForQuery:(id)arg1 monitor:(id)arg2;
- (id)stringForQuery:(id)arg1;
- (id)pathForMailboxURL:(id)arg1;
- (id)mailboxURLForMessage:(id)arg1;
- (void)messagesWereCompacted:(id)arg1 mailboxes:(id)arg2;
- (id)dataPathForMessage:(id)arg1 type:(NSInteger)arg2;
- (id)attachmentsDirectoryForLibraryID:(NSUInteger)arg1 mailboxID:(NSUInteger)arg2;
- (BOOL)_setMessageData:(id)arg1 libraryID:(NSUInteger)arg2 part:(id)arg3 partial:(BOOL)arg4 complete:(BOOL)arg5;
- (void)_setMessageDataString:(id)arg1 forKey:(id)arg2 forMessage:(id)arg3;
- (id)bodyDataAtPath:(id)arg1 headerData:(id*)arg2;
- (id)headerDataAtPath:(id)arg1;
- (id)queryForCriterion:(id)arg1 options:(NSUInteger)arg2 baseTable:(NSUInteger)arg3 isSubquery:(BOOL)arg4 range:(struct _NSRange { NSUInteger x1; NSUInteger x2; })arg5;
- (id)queryForCriterion:(id)arg1 options:(NSUInteger)arg2 baseTable:(NSUInteger)arg3 isSubquery:(BOOL)arg4;
- (id)queryForCriterion:(id)arg1 options:(NSUInteger)arg2 baseTable:(NSUInteger)arg3;
- (id)queryForCriterion:(id)arg1 options:(NSUInteger)arg2 range:(struct _NSRange { NSUInteger x1; NSUInteger x2; })arg3;
- (id)queryForCriterion:(id)arg1 options:(NSUInteger)arg2;
- (void)iterateMessagesMatchingCriterion:(id)arg1 withResultHandler:(id)arg2 options:(NSUInteger)arg3 withMonitor:(id)arg4;
- (void)setDatabasePath:(id)arg1;
- (id)defaultDatabasePath;
- (void)unlockDB:(struct sqlite3 { }*)arg1;
- (void)closeDB:(struct sqlite3 { }*)arg1;
- (void)checkInDB:(struct sqlite3 { }*)arg1;
- (void)setMigrationHandler:(id)arg1;
- (struct sqlite3 { }*)_getWriterDBWithRetryCount:(NSInteger)arg1;
- (struct sqlite3 { }*)setupWriterDB;
- (BOOL)cleanupProtectedTables:(struct sqlite3 { }*)arg1 checkForInconsistencies:(BOOL)arg2;
- (void)_reconcileJournal:(struct sqlite3 { }*)arg1;
- (NSInteger)attachProtectedDatabase:(struct sqlite3 { }*)arg1;
- (NSInteger)detachProtectedDatabase:(struct sqlite3 { }*)arg1;
- (void)handleKeybagLock;
- (void)handleKeybagUnlock;
- (struct sqlite3 { }*)openNewHandle;
- (struct sqlite3 { }*)getWriterDB;
- (struct sqlite3_stmt { }*)preparedStatement:(struct sqlite3 { }*)arg1 pattern:(id)arg2;
- (NSInteger)handleSqliteError:(struct sqlite3 { }*)arg1 format:(id)arg2;
- (void)_yieldDBToOtherProcess;
- (void)setResetHandler:(int (*)())arg1;
- (void)setMailboxPathProvider:(id)arg1;
- (id)allMailboxURLStrings;
- (void)populateThreadingInfoForMessage:(id)arg1 withLibraryID:(NSUInteger)arg2 andMailboxID:(NSInteger)arg3 withHeaders:(id)arg4 andMessageIDSubjectMapping:(id)arg5 inDatabase:(struct sqlite3 { }*)arg6;
- (void)populateAddressListInfoForLibraryID:(NSUInteger)arg1 withHeaders:(id)arg2 inDatabase:(struct sqlite3 { }*)arg3;
- (id)populateExternalIDForLibraryID:(NSUInteger)arg1 inDatabase:(struct sqlite3 { }*)arg2;
- (void)migrateExternalFilesForMessage:(id)arg1 withLibraryID:(NSUInteger)arg2 andMailboxID:(NSInteger)arg3 externalID:(id)arg4 listingsByDirectory:(id)arg5;
- (void)populateInfo:(NSUInteger)arg1 fromMessageDataForAllMessages:(struct sqlite3 { }*)arg2;
- (NSUInteger)updateSequenceNumber;
- (NSUInteger)accessSequenceNumber;
- (void)updateRecipientsForMessage:(id)arg1 fromHeaders:(id)arg2;
- (void)updateThreadingInfoForMessage:(id)arg1 fromHeaders:(id)arg2;
- (id)dateOfOldestNonSearchResultMessageInMailbox:(id)arg1;
- (id)messagesWithoutSummariesForMailbox:(id)arg1;
- (id)messagesWithSummariesForMailbox:(id)arg1 fromRowID:(NSUInteger)arg2 limit:(NSUInteger)arg3;
- (NSUInteger)deletedCountForMailbox:(id)arg1;
- (id)oldestMessageInMailbox:(id)arg1;
- (id)messageWithRemoteID:(id)arg1 inRemoteMailbox:(id)arg2;
- (NSUInteger)maximumRemoteIDForMailbox:(id)arg1;
- (NSUInteger)minimumRemoteIDForMailbox:(id)arg1;
- (id)sequenceIdentifierForMailbox:(id)arg1;
- (void)setSequenceIdentifier:(id)arg1 forMailbox:(id)arg2;
- (id)sequenceIdentifierForMessagesWithRemoteIDs:(id)arg1 inMailbox:(id)arg2;
- (void)setSequenceIdentifier:(id)arg1 forMessageWithLibraryID:(NSUInteger)arg2;
- (void)setSequenceIdentifier:(id)arg1 forMessagesWithRemoteIDs:(id)arg2 inMailbox:(id)arg3;
- (id)getDetailsForMessagesWithRemoteIDInRange:(struct _NSRange { NSUInteger x1; NSUInteger x2; })arg1 fromMailbox:(id)arg2;
- (id)getDetailsForAllMessagesFromMailbox:(id)arg1;
- (id)messagesWithMessageIDHeader:(id)arg1;
- (void)compactMessages:(id)arg1 permanently:(BOOL)arg2;
- (void)removeAllMessagesFromMailbox:(id)arg1 removeMailbox:(BOOL)arg2 andNotify:(BOOL)arg3;
- (id)messageWithMessageID:(id)arg1 inMailbox:(id)arg2;
- (id)dataConsumerForMessage:(id)arg1 isPartial:(BOOL)arg2;
- (id)dataConsumerForMessage:(id)arg1;
- (id)bodyDataForMessage:(id)arg1;
- (void)sendMessagesMatchingCriterion:(id)arg1 to:(id)arg2 options:(NSUInteger)arg3 range:(struct _NSRange { NSUInteger x1; NSUInteger x2; })arg4;
- (void)sendMessagesMatchingCriterion:(id)arg1 to:(id)arg2 options:(NSUInteger)arg3;
- (void)setBusyTimeoutInterval:(double)arg1;
- (void)cleanOldDatabases;
- (void)closeDatabaseConnections;
- (void)deletePOPUID:(id)arg1 inMailbox:(id)arg2;
- (id)UIDsToDeleteInMailbox:(id)arg1;
- (id)deletedUIDsInMailbox:(id)arg1;
- (id)allUIDsInMailbox:(id)arg1;
- (id)hiddenPOPUIDsInMailbox:(id)arg1;
- (BOOL)outstandingWritesExist;
- (void)lockDBForWriting;
- (void)setFlagsForMessages:(id)arg1 mask:(unsigned long long)arg2;
- (id)remoteStoreForMessage:(id)arg1;
- (NSUInteger)totalCountForMailbox:(id)arg1;
- (NSUInteger)nonDeletedCountForMailbox:(id)arg1 includeServerSearchResults:(BOOL)arg2 includeThreadSearchResults:(BOOL)arg3;
- (id)messagesWithSummariesForMailbox:(id)arg1 range:(struct _NSRange { NSUInteger x1; NSUInteger x2; })arg2;
- (id)messagesMatchingCriterion:(id)arg1 options:(NSUInteger)arg2 range:(struct _NSRange { NSUInteger x1; NSUInteger x2; })arg3;
- (id)copyMessageInfosForMailbox:(id)arg1;
- (struct __CFSet { }*)copyLibraryIDsWithoutConversationHashesForMailbox:(id)arg1;
- (NSUInteger)locationOfMessageID:(long long)arg1 inMailbox:(id)arg2;
- (id)messageWithLibraryID:(NSUInteger)arg1 options:(NSUInteger)arg2;
- (id)messagesWithoutSummariesForMailbox:(id)arg1 fromRowID:(NSUInteger)arg2 limit:(NSUInteger)arg3;
- (id)messagesMatchingCriterion:(id)arg1 options:(NSUInteger)arg2;
- (id)serverSearchResultMessagesForMailbox:(id)arg1;
- (id)filterContiguousMessages:(id)arg1 forCriterion:(id)arg2 options:(NSUInteger)arg3;
- (id)messageWithMessageID:(id)arg1;
- (id)headerDataForMessage:(id)arg1;
- (id)dataForMimePart:(id)arg1 isComplete:(BOOL*)arg2;
- (id)dataConsumerForMessage:(id)arg1 part:(id)arg2 incomplete:(BOOL)arg3;
- (id)fullBodyDataForMessage:(id)arg1 andHeaderDataIfReadilyAvailable:(id*)arg2;
- (id)bodyDataForMessage:(id)arg1 andHeaderDataIfReadilyAvailable:(id*)arg2 isComplete:(BOOL*)arg3;
- (id)messagesForMailbox:(id)arg1 olderThanNumberOfDays:(NSInteger)arg2;
- (id)addMessages:(id)arg1 withMailbox:(id)arg2 fetchBodies:(BOOL)arg3 newMessagesByOldMessage:(id)arg4 remoteIDs:(id)arg5 setFlags:(unsigned long long)arg6 clearFlags:(unsigned long long)arg7 messageFlagsForMessages:(id)arg8 copyFiles:(BOOL)arg9 addPOPUIDs:(BOOL)arg10 dataSectionsByMessage:(id)arg11;
- (void)compactMailbox:(id)arg1;
- (id)urlForMailboxID:(NSUInteger)arg1;
- (id)mailboxUidForMessage:(id)arg1;
- (void)setMessage:(id)arg1 isPartial:(BOOL)arg2;
- (BOOL)isMessageContentsLocallyAvailable:(id)arg1;
- (void)setFlags:(unsigned long long)arg1 forMessage:(id)arg2;
- (void)setSummary:(id)arg1 forMessage:(id)arg2;
- (id)dataPathForMessage:(id)arg1;
- (id)dataPathForMessage:(id)arg1 part:(id)arg2;
- (id)accountForMessage:(id)arg1;
- (void)setData:(id)arg1 forMessage:(id)arg2 isPartial:(BOOL)arg3;
- (id)dataConsumerForMessage:(id)arg1 part:(id)arg2;
- (id)messageWithLibraryID:(NSUInteger)arg1;
- (NSUInteger)unreadCountForMailbox:(id)arg1;
- (NSUInteger)nonDeletedCountForMailbox:(id)arg1;
- (NSUInteger)mailboxIDForURLString:(id)arg1;
- (void)deleteMailboxes:(id)arg1;
- (BOOL)renameMailboxes:(id)arg1 to:(id)arg2;
- (void)setMailAccounts:(id)arg1;
- (BOOL)shouldCancel;
- (id)setFlagsFromDictionary:(id)arg1 forMessages:(id)arg2;
- (void)setNumberOfAttachments:(NSUInteger)arg1 isSigned:(BOOL)arg2 isEncrypted:(BOOL)arg3 forMessage:(id)arg4;
- (id)loadMeetingExternalIDForMessage:(id)arg1;
- (id)loadMeetingDataForMessage:(id)arg1;
- (id)initWithPath:(id)arg1;
- (void)commit;
- (void)dealloc;
- (BOOL)isBusy;
- (NSInteger)threadPriority;
- (void)setThreadPriority:(NSInteger)arg1;

@end
